{"openapi":"3.1.0","info":{"title":"Pacuare Reserve","summary":"Query the Pacuare Reserve dataset.","version":"v1"},"servers":[{"url":"/v1"}],"paths":{"/auth/verify":{"get":{"summary":"Generate Code","operationId":"generate_code_auth_verify_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Verify","operationId":"verify_auth_verify_post","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_verify_auth_verify_post"}}}},"responses":{"200":{"description":"Successfully verified and set cookie","content":{"application/json":{"schema":{}}}},"401":{"description":"Verification failed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/access":{"get":{"summary":"Access Level","operationId":"access_level_auth_access_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthAccess"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"summary":"Logout","operationId":"logout_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/key":{"get":{"summary":"Generate Key","operationId":"generate_key_auth_key_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"description","in":"query","required":true,"schema":{"type":"string","title":"Description"}},{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"string","title":"Response Generate Key Auth Key Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Key","operationId":"delete_key_auth_key_delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"id","in":"query","required":true,"schema":{"type":"integer","title":"Id"}},{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"integer","title":"Response Delete Key Auth Key Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/keys":{"get":{"summary":"List Keys","operationId":"list_keys_auth_keys_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"array","prefixItems":[{"type":"integer"},{"type":"string"},{"type":"string"}],"minItems":3,"maxItems":3},"title":"Response List Keys Auth Keys Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/query":{"post":{"summary":"Query","operationId":"query_query_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/query.csv":{"post":{"summary":"Query Csv","description":"Query the database, returning the response as a CSV table instead of JSON.","operationId":"query_csv_query_csv_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/db/exists":{"get":{"summary":"User Db Exists","operationId":"user_db_exists_db_exists_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/db/create":{"post":{"summary":"Create User Db","operationId":"create_user_db_db_create_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"refresh","in":"query","required":false,"schema":{"enum":["none","refresh","recreate"],"type":"string","default":"none","title":"Refresh"}},{"name":"auth_status","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Auth Status"}}],"responses":{"200":{"description":"Successfully created and initialized user database.","content":{"application/json":{"schema":{}}}},"409":{"description":"User database already exists; not created."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AuthAccess":{"properties":{"email":{"type":"string","title":"Email"},"access_level":{"type":"string","enum":["full","restricted"],"title":"Access Level"}},"type":"object","required":["email","access_level"],"title":"AuthAccess"},"Body_verify_auth_verify_post":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"Body_verify_auth_verify_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"QueryRequest":{"properties":{"query":{"type":"string","title":"Query"},"params":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Params"}},"type":"object","required":["query"],"title":"QueryRequest"},"QueryResponse":{"properties":{"columns":{"items":{"type":"string"},"type":"array","title":"Columns"},"values":{"items":{"items":{},"type":"array"},"type":"array","title":"Values"}},"type":"object","required":["columns","values"],"title":"QueryResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}